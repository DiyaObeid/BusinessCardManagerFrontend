<div class="container">
    <div class="container">
      <h2 class="mb-4">Upload a Business Card</h2>
    
      <!-- Go Back Button -->
      <button class="btn btn-primary mb-3" routerLink="/card-list">Go Back to Card List</button>
      <div *ngIf="notificationMessage" [ngClass]="{'alert alert-success': notificationType === 'success', 'alert alert-danger': notificationType === 'error'}">
        {{ notificationMessage }}
      </div>
      <div *ngIf="isValidFileExtensionMessage" [ngClass]="{'error-message': !isValidFileExtension(selectedFile), 'success-message': isValidFileExtension(selectedFile)}">
        {{ isValidFileExtensionMessage }}
      </div>
     
  
    <!-- Drag-and-Drop Area -->
    <div class="drag-drop-area p-4 text-center border rounded"
         (dragover)="onDragOver($event)"
         (dragenter)="onDragEnter($event)"
         (dragleave)="onDragLeave($event)"
         (drop)="onDrop($event)"
         [ngClass]="{'drag-over': isDragging}">
         <small class="form-text text-muted">The CSV file should be in the format shown below:</small>
         <img src="assets/images/business_cards_mock.png" alt="CSV Format Example" class="img-fluid" />
  
  <!-- Drag Icon and Text -->
  <div *ngIf="!selectedFile" class="drag-content">
  <i class="fas fa-cloud-upload-alt fa-3x text-info mb-3"></i>
  <p class="lead">Drag and drop a file here or</p>
  <input type="file" (change)="handleFileInput($event)" accept=".csv, .xml" class="btn btn-info" />
  </div>
  
  <!-- Selected File Display -->
  <div *ngIf="selectedFile" class="selected-file-content text-center">
  <h4 class="text-success">File Selected</h4>
  <div class="alert alert-info d-inline-block">
   {{ selectedFile.name }} - {{ selectedFile.size / 1000 }} KB
   <button class="btn btn-danger btn-sm ml-3" (click)="deleteFile()">Delete</button>
  </div>
  </div>
  </div>
  
    
  
  
      
      <!-- Upload Button -->
      <button (click)="onSubmit()" [disabled]="!selectedFile" class="btn btn-primary mt-4">Upload</button>
    </div>
    
      
  
      
    <div *ngIf="parsedCards.length > 0">
      <h3 class="text-center">Parsed Business Cards</h3>
      <div class="table-responsive mt-4">
        <table class="table table-striped table-bordered table-hover">
          <thead class="thead-dark">
            <tr>
              <th>Name</th>
              <th>Gender</th>
              <th>Date of Birth</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Address</th>
              <th>Photo</th>
              <th>Add Photo</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let card of parsedCards">
              <td>{{ card.name }}</td>
              <td>{{ card.gender }}</td>
              <td>{{ card.dateOfBirth | date:'shortDate' }}</td>
              <td>{{ card.email }}</td>
              <td>{{ card.phone }}</td>
              <td>{{ card.address }}</td>
              <td>
                <img *ngIf="card.photo" [src]="card.photo" alt="Business Card Photo" class="img-thumbnail" style="width: 50px; height: 50px; object-fit: cover;" />
              </td>
              <td>
                <input type="file" accept="image/*" (change)="onPhotoSelected($event)" class="form-control" />
              </td>
              <td class="text-center">
                <button class="btn btn-success" (click)="submitCard(card)">Submit</button>
                <button class="btn btn-info" (click)="openPreview(card)">Preview</button>
              </td>
              <card-preview-modal *ngIf="card" [cardData]="card"></card-preview-modal>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
     
    </div>
   
    